<div id="titleDiv">
<h1>Projects <span style="color: #F5BF74;">Board</span></h1>
</div>

<div class="container" *ngIf="!createProject">
  <div class="table-wrapper" *ngIf="!selected">
    <div class="table-title">
      <div class="row">
        <div class="col-sm-6">
          <h2><b>Projects</b></h2>
        </div>
        <div class="col-sm-6">
          <a class="btn btn-success zoom" data-toggle="modal" (click)="createProject = true"><i class="material-icons">&#xE147;</i> <span>Add New Project</span></a>
          <a class="btn btn-danger zoom" data-toggle="modal" (click)="deleteProjects()"><i class="material-icons">&#xE15C;</i> <span>Archive</span></a>
        </div>
      </div>
    </div>
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>
          </th>
          <th>Id</th>
          <th>Name</th>
          <th>Description</th>
          <th>Skill</th>
          <th>Image</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody *ngFor="let project of projects">
        <tr *ngIf="project.enabled">
          <td>
            <span class="custom-checkbox">
              <input type="checkbox" id="checkbox1" name="options[]" value="1" (change)="addProjectToDelete(project)">
              <label for="checkbox1"></label>
            </span>
          </td>
          <td (click)="displayProject(project)">{{project.id}}</td>
          <td (click)="displayProject(project)" class="ellipsis">{{project.name}}</td>
          <td (click)="displayProject(project)" class="ellipsis">{{project.description}}</td>
          <!-- ASK ABOUT THIS!!! -->
          <ng-container *ngFor="let projectSkill of project.skills">
            <td *ngIf="project.skills; else noSkills" (click)="displayProject(project)" class="ellipsis">{{projectSkill.name}}</td>
          </ng-container>
          <ng-template #noSkills>
            <td (click)="displayProject(project)" class="ellipsis"><span>No skills</span></td>
          </ng-template>
          <td (click)="displayProject(project)"><img class="zoom" id="projectImage" src="{{project.imagePrimary}}"></td>
          <td>
            <!-- <a class="edit" data-toggle="modal" (click)="displayProject(project)"><i class="material-icons" data-toggle="tooltip" title="Edit">&#xE254;</i></a>
            <a class="delete" data-toggle="modal" (click)="deleteProject(project)"><i class="material-icons" data-toggle="tooltip" title="Delete">&#xE872;</i></a> -->
            <a class="btn btn-info zoom" data-toggle="modal" style="color: white; font-size: 10px !important" (click)="displayProject(project)"><i class="material-icons">&#xe0ca;</i> <span>Comment</span></a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<div class="container" *ngIf="selected && !editProject" class="box">

  <div class="container" *ngIf="selected">
    <table class="content-table">
      <caption>Project <span style="color: #F5BF74;">Summary</span></caption>
      <thead>
        <tr>
          <th>Image</th>
          <th>Name</th>
          <th>Description</th>
          <th>Date Posted</th>
          <th>Start Date</th>
          <th>Projected Completion</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><img class="" id="projectImg" style="width: 300px;" src="{{ selected.imagePrimary }}"></td>
          <td>{{ selected.name }}</td>
          <td>{{ selected.description }}</td>
          <td>{{ selected.datePosted | date : "shortDate"}}</td>
          <td>{{ selected.startDate | date : "shortDate"}}</td>
          <td>{{ selected.projectedDate | date : "shortDate"}}</td>
        </tr>
      </tbody>
    </table>
    <div>
      <h1>COMMENTS</h1>
      <p *ngFor="let comment of comments">
        {{comment.comment }} <br>
      </p>
        <p *ngIf="comments.length <= 0">
          <strong>No comments found!</strong>
      </p>
    </div>
    <!-- NEED HELP WITH ALLOWING ADMIN OR USER THAT CREATED PROJECT TO DISPLAY EDIT BUTTON!!! -->

    <button *ngIf="selected.userId === loggedInUser.id || loggedInUser.role === 'admin'" class="btn btn-alt" (click)="setEditProject()">Edit</button>
    <button class="btn btn-alt" (click)="displayTable(); editProject = null">Back</button>
    <button class="btn btn-alt" (click)="displayTable(); editProject = null">Join</button>
  </div>

</div>

<div *ngIf="selected && editProject" class="box">
  <label class="form-label" for="task">Name</label>
  <input class="form-control" type="text" name="editProject.name" [(ngModel)]="editProject.name" placeholder="{{selected.name}}"><br>
  <label class="form-label" for="description">Description</label>
  <input class="form-control" type="text" name="editProject.description" [(ngModel)]="editProject.description" placeholder="{{selected.description}}"><br>
  <label for="imageUrl">Image URL</label>
  <input type="text" name="editProject.imagePrimary" [(ngModel)]="editProject.imagePrimary" placeholder="{{selected.imagePrimary}}"><br>

  <button class="btn btn-primary" (click)="updateProject(editProject)">Save</button>
  <button class="btn btn-primary" (click)="editProject = null">Cancel</button>
</div>

<div id="createProjectFormParent">
  <h4>Create <span style="color:#F5BF74;">Project</span></h4>
  <div id="createProjectForm" *ngIf="createProject" class="box">
  <form>
  <label class="form-label" for="task">Name</label>
  <input class="form-control" type="text" name="addProject.name" [(ngModel)]="newProject.name" required><br>
  <label class="form-label" for="description">Description</label>
  <input class="form-control" type="text" name="addProject.description" [(ngModel)]="newProject.description" required><br>
  <label for="imageUrl">Image URL</label><br>
  <input class="form-control" type="text" name="addProject.imagePrimary" [(ngModel)]="newProject.imagePrimary" required><br>
  <label class="form-label" for="startDate">Start Date</label>
 <input class="form-control" type="date" name= "addProject.startDate" [(ngModel)]="newProject.startDate" required>
 <label class="form-label" for="projectedDate">Projected Completion Date</label>
 <input class="form-control" type="date" name= "addProject.projectedDate" [(ngModel)]="newProject.projectedDate" required>
  <br>
  <button id="saveNewProjectBtn" class="btn btn-primary" (click)="addProject(newProject)">Save</button>
  <button class="btn btn-danger" (click)="createProject = false">Back</button>
</form>
</div>
</div>


<!-- Info about selected project -->
<!-- <div class="container" *ngIf="selected">
  <table class="content-table">
    <caption>Project <span style="color: #F5BF74;">Summary</span></caption>
    <thead>
      <tr>
        <th>Image</th>
        <th>Name</th>
        <th>Description</th>
        <th>Date Posted</th>
        <th>Start Date</th>
        <th>Projected Completion</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><img class="zoom" id="projectImg" style="width: 300px;" src="{{ selected.imagePrimary }}"></td>
        <td>{{ selected.name }}</td>
        <td>{{ selected.description }}</td>
        <td>{{ selected.datePosted | date : "shortDate"}}</td>
        <td>{{ selected.startDate | date : "shortDate"}}</td>
        <td>{{ selected.projectedDate | date : "shortDate"}}</td>
      </tr>
    </tbody>
  </table>
  <button class="btn btn-alt" (click)="setEditProject()">Edit</button>
  <button class="btn btn-alt" (click)="displayTable(); editProject = null">Back</button>
</div> -->
<!-- End of information about a selected project -->
<br />

<button *ngIf="!displayTable" class="btn btn-primary" (click)="setAddProject()">Add a project!</button>
